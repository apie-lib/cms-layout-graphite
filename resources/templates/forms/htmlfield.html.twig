<stylo-editor class="unhandled"></stylo-editor>
<article contenteditable="true" class="unhandled">{{ property('value') }}</article>
<textarea name="{{ property('name') }}" class="unhandled-editor">{{ property('value') }}</textarea>
<script type="module">
if (!window.loadedHTMLField) {
    window.loadedHTMLField = import('https://unpkg.com/@papyrs/stylo@latest/dist/stylo/stylo.esm.js')
        .then((module) => {
            const article = document.querySelector('article[contenteditable="true"].unhandled');
            article.classList.remove('unhandled');
            const stylo = document.querySelector('stylo-editor.unhandled');
            stylo.classList.remove('unhandled');
            stylo.containerRef = article;
            const textarea = document.querySelector('textarea.unhandled-editor');
            textarea.classList.remove('unhandled-editor');
            stylo.addEventListener('updateParagraphs', function (ev) {
                const newHTML = article.innerHTML;
                textarea.value = newHTML;
            })
        })
}
</script>